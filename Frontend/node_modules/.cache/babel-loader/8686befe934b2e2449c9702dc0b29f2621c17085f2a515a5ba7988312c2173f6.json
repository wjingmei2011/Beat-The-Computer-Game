{"ast":null,"code":"var _jsxFileName = \"/Users/maywang/Coding Stuff/Mini computer game/With authentification/Frontend/src/auth.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst backendUrl = process.env.REACT_APP_BACKEND_URL;\nconsole.log('backendUrl', backendUrl);\nconst Auth = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isSignUp, setIsSignUp] = useState(true);\n  const navigate = useNavigate();\n  const handleSignUp = async () => {\n    console.log('Request Payload:', {\n      username,\n      password\n    });\n    try {\n      const response = await fetch(`${backendUrl}/game/signup`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        }),\n        credentials: 'include'\n      });\n      // parsing response\n      const data = await response.json();\n      if (response.ok) {\n        alert('Sign up successful. Please sign in.');\n        setIsSignUp(false);\n      } else if (response.status === 400 && data.message === 'Username already exists') {\n        alert('User already exists. Please sign in.');\n        setIsSignUp(false);\n      } else {\n        alert('Sign up failed. Here is the message from the server:', data.message);\n      }\n    } catch (error) {\n      console.error('Error during sign up:', error);\n      alert('Error during sign up:', error);\n    }\n  };\n  const handleSignIn = async () => {\n    try {\n      const response = await fetch(`${backendUrl}/game/signin`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        }),\n        credentials: 'include'\n      });\n      // parsing response\n      const data = await response.json();\n      if (response.ok) {\n        alert('Sign in successful.');\n        localStorage.setItem('username', username);\n        navigate('/game'); // Redirect to home page after sign in\n      } else {\n        alert('Sign in failed. Here is the message from the server:', response.message);\n      }\n    } catch (error) {\n      console.error('Error during sign in:', error);\n      alert('Error during sign in:', error);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault(); //\n    if (isSignUp) {\n      handleSignUp();\n    } else {\n      handleSignIn();\n    }\n  };\n\n  //renders differently: if the user is not signed up, the page will show as a Sign up page, otherwise it'll show as a Sign in page.\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: isSignUp ? 'Sign Up' : 'Sign In'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: isSignUp ? 'Sign Up' : 'Sign In'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsSignUp(!isSignUp),\n      children: isSignUp ? 'Already have an account? Sign In' : 'New user? Sign Up'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 13\n  }, this);\n};\n_s(Auth, \"+94xDNhxppyO72pmzcQcPcGVtq8=\", false, function () {\n  return [useNavigate];\n});\n_c = Auth;\nexport default Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","useNavigate","jsxDEV","_jsxDEV","backendUrl","process","env","REACT_APP_BACKEND_URL","console","log","Auth","_s","username","setUsername","password","setPassword","isSignUp","setIsSignUp","navigate","handleSignUp","response","fetch","method","headers","body","JSON","stringify","credentials","data","json","ok","alert","status","message","error","handleSignIn","localStorage","setItem","handleSubmit","e","preventDefault","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","required","onClick","_c","$RefreshReg$"],"sources":["/Users/maywang/Coding Stuff/Mini computer game/With authentification/Frontend/src/auth.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst backendUrl = process.env.REACT_APP_BACKEND_URL;\nconsole.log('backendUrl', backendUrl);\n\nconst Auth = () => {\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [isSignUp, setIsSignUp] = useState(true);\n    const navigate = useNavigate();\n\n\n    const handleSignUp = async () => {\n        console.log('Request Payload:', { username, password });\n        try {\n            const response = await fetch(`${backendUrl}/game/signup`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ username, password }),\n                credentials: 'include',\n            });\n            // parsing response\n            const data = await response.json();\n\n            if (response.ok) {\n                alert('Sign up successful. Please sign in.');\n                setIsSignUp(false);\n            }\n            else if (response.status === 400 && data.message === 'Username already exists') {\n                alert('User already exists. Please sign in.');\n                setIsSignUp(false);\n            } else {\n                alert('Sign up failed. Here is the message from the server:', data.message);\n            }\n        } catch (error) {\n            console.error('Error during sign up:', error);\n            alert('Error during sign up:', error);\n        }\n        };\n\n        const handleSignIn = async () => {\n            try {\n                const response = await fetch(`${backendUrl}/game/signin`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ username, password }),\n                    credentials: 'include',\n                });\n                // parsing response\n                const data = await response.json();\n\n                if (response.ok) {\n                    alert('Sign in successful.');\n                    localStorage.setItem('username', username);\n                    navigate('/game'); // Redirect to home page after sign in\n                } else {\n                    alert('Sign in failed. Here is the message from the server:', response.message);\n                }\n            } catch (error) {\n                console.error('Error during sign in:', error);\n                alert('Error during sign in:', error);\n            }\n        };\n\n        const handleSubmit = (e) => {\n            e.preventDefault(); //\n            if (isSignUp) {\n                handleSignUp();\n            } else {\n                handleSignIn();\n            }\n        };\n\n        //renders differently: if the user is not signed up, the page will show as a Sign up page, otherwise it'll show as a Sign in page.\n        return (\n            <div>\n                <h2>{isSignUp ? 'Sign Up' : 'Sign In'}</h2>\n                <form onSubmit={handleSubmit}>\n                    <div>\n                        <label>Username:</label>\n                        <input\n                            type=\"text\"\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                            required\n                        />\n                    </div>\n                    <div>\n                        <label>Password:</label>\n                        <input\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                            required\n                        />\n                    </div>\n                    <button type=\"submit\">{isSignUp ? 'Sign Up' : 'Sign In'}</button>\n                </form>\n\n                {/* The button under the form allows users to toggle between sign up and sign in. When clicked, it will change the SignUp state to the opposite value, i.e. if the user is in the Sign in page, after submission the page will show as a Sign up page.*/}\n                <button onClick={() => setIsSignUp(!isSignUp)}>\n                    {isSignUp ? 'Already have an account? Sign In' : 'New user? Sign Up'}\n                </button>\n            </div>\n        );\n    };\n\nexport default Auth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}